import{a as N,r as i,ay as C,j as e,T as v,B as m,l as _,m as B,a8 as g,M as k,f as A,D as P,b as R}from"./index-DP8KUik0.js";import{T as E}from"./TablePagination-Bqy9TBjS.js";import{d as y}from"./dayjs.min-D6j4StU-.js";import{S as L,T as D}from"./TextField-wt1h2hNg.js";import{L as F,A as $,D as O}from"./AdapterDayjs-BSuw-uAO.js";import{d as q}from"./Explicit-CDg5BFZq.js";import{E as z}from"./useExportExcel-B3uvJs9a.js";import{C as H}from"./Container-CJKjEmvN.js";import"./Chip-DFlt0T8Q.js";import"./Tooltip-BGGRBVqn.js";import"./useThemeProps-RlFDv_1a.js";import"./FormControlLabel-f3UpizWu.js";import"./SwitchBase-BEEy8CUH.js";import"./InputAdornment-BB7_Xr8N.js";import"./KeyboardArrowRight-DXd9sxFF.js";import"./DialogContent-BphjaW86.js";import"./ListItem-DItOy7QW.js";function W({startDate:n,endDate:h}){const x=N();i.useState(!1),i.useState(null);const l=[{field:"productId",headerName:"Mã sản phẩm",width:200},{field:"image",headerName:"Ảnh",headerAlign:"center",width:250,renderCell:a=>e.jsx(m,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx("img",{src:a.row.image,alt:"Product",style:{width:"100px",height:"50px",objectFit:"cover"}})})},{field:"productName",headerName:"Tên sản phẩm",width:300},{field:"unit",headerName:"Đơn vị tính",width:150},{field:"quantitySold",headerName:"Số lượng bán",width:150}];i.useEffect(()=>{x(C({page:1,pageSize:10,startDate:u(n),endDate:u(h)}))},[n,h]);const u=a=>y(a).format("YYYY-MM-DD");return e.jsxs(e.Fragment,{children:[e.jsx(v,{marginTop:4,marginBottom:2,variant:"h6",children:"Danh sách sản phẩm xuất kho"}),e.jsx(E,{columns:l,stt:!0,id:"productId",dispatchHandle:C,sliceName:"outProduct",additionalParams:{startDate:u(n),endDate:u(h)}})]})}var M={},G=B;Object.defineProperty(M,"__esModule",{value:!0});var w=M.default=void 0,X=G(_()),V=e;w=M.default=(0,X.default)((0,V.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");var T={},K=B;Object.defineProperty(T,"__esModule",{value:!0});var S=T.default=void 0,U=K(_()),J=e;S=T.default=(0,U.default)((0,J.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");function Q({startDate:n,endDate:h,setStartDate:x,setEndDate:l,handleChange:u,invoiceDays:a,sort:Y,setSort:I}){const[o,j]=i.useState({start:null,end:null});i.useEffect(()=>{o.start&&o.end&&(x(o.start),l(o.end))},[o,x,l]);const f=(t,s)=>{const d=s==="next"?1:-1;let r=n;a===7?r=n.add(d*7,"day"):a===30?r=n.add(d,"month"):r=n.add(d,"day"),x(r),a===1?l(r):a===7?l(r.endOf("week")):a===30&&l(r.endOf("month"))},p=(()=>{switch(a){case 1:return{prev:e.jsx(w,{}),next:e.jsx(S,{})};case 7:return{prev:e.jsx(w,{}),next:e.jsx(S,{})};case 30:return{prev:e.jsx(w,{}),next:e.jsx(S,{})};default:return null}})(),c=(t,s)=>{j(d=>({...d,[t]:s}))};return e.jsx(e.Fragment,{children:e.jsxs(m,{sx:{backgroundColor:"#f2f2f2",padding:2,borderRadius:1,boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},flex:5,children:[e.jsx(v,{variant:"h6",component:"h3",fontWeight:"bold",color:"inherit",marginRight:1,children:"BÁO CÁO XUẤT HÀNG THEO:"}),e.jsx(m,{display:"flex",alignItems:"center",children:e.jsxs(L,{id:"filter-invoice-select",value:a,onChange:u,children:[e.jsx(g,{value:1,children:"Hôm nay"}),e.jsx(g,{value:7,children:"Tuần này"}),e.jsx(g,{value:30,children:"Tháng này"}),e.jsx(g,{value:"custom",children:"Tùy chỉnh"})]})}),a==="custom"?e.jsx(m,{display:"flex",alignItems:"center",gap:2,sx:{flexGrow:1,justifyContent:"center"},children:e.jsxs(F,{dateAdapter:$,children:[e.jsx(O,{label:"Ngày bắt đầu",value:o.start,onChange:t=>c("start",t),renderInput:t=>e.jsx(D,{...t}),format:"DD/MM/YYYY"}),e.jsx(v,{children:" đến "}),e.jsx(O,{label:"Ngày kết thúc",value:o.end,onChange:t=>c("end",t),renderInput:t=>e.jsx(D,{...t}),format:"DD/MM/YYYY"})]})}):p&&e.jsxs(m,{display:"flex",alignItems:"center",gap:2,sx:{flexGrow:1,justifyContent:"center"},children:[e.jsx(k,{variant:"outlined",onClick:()=>f("day","prev"),children:p.prev}),e.jsx(v,{children:a===1?n.format("DD/MM/YYYY"):`Từ ${n.format("DD/MM/YYYY")} đến ${h.format("DD/MM/YYYY")}`}),e.jsx(k,{variant:"outlined",onClick:()=>f("day","next"),children:p.next})]})]})})}function pe(){const[n,h]=i.useState(1),[x,l]=i.useState("total"),[u,a]=i.useState("des"),[Y,I]=i.useState(y()),[o,j]=i.useState(y()),f=A(c=>{var t,s;return((s=(t=c.outProduct)==null?void 0:t.data)==null?void 0:s.data)||[]}),b=c=>{h(c.target.value);const t=c.target.value;let s,d;const r=y();t===1?(s=r.startOf("day"),d=r.endOf("day")):t===7?(s=r.startOf("week"),d=r.endOf("week")):t===30&&(s=r.startOf("month"),d=r.endOf("month")),I(s),j(d)},p=async()=>{const c=[{header:"STT",key:"STT",width:10},{header:"Mã sản phẩm",key:"productId",width:15},{header:"Tên sản phẩm",key:"productName",width:25},{header:"Ảnh",key:"image",width:20},{header:"Đơn vị tính",key:"unit",width:15},{header:"Số lượng",key:"quantitySold",width:15}];f&&z(c,f,"DanhSachSanPhamXuatKho")};return e.jsxs(H,{maxWidth:"xl",sx:{paddingTop:2},children:[e.jsx(m,{display:"flex",flexWrap:"wrap",alignItems:"center",marginBottom:1,children:e.jsx(Q,{startDate:Y,setStartDate:I,endDate:o,setEndDate:j,handleChange:b,viewMode:x,setViewMode:l,invoiceDays:n,sort:u,setSort:a})}),e.jsx(P,{}),e.jsx(W,{startDate:Y,endDate:o}),e.jsx(R,{sx:{marginY:"20px",fontSize:10},variant:"contained",startIcon:e.jsx(q,{}),onClick:p,children:"Xuất Excel"})]})}export{pe as default};
