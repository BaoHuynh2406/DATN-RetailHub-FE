import{r as T,i as R,j as t,u as H,b as M,g as y,a as d,B as s,M as v,$ as P,a0 as _,a1 as B,T as g,c as w,a2 as K,a3 as q,N as V}from"./index-fCbYz-6P.js";import{T as $}from"./TablePagination-hGNVGNlY.js";import{E as W}from"./useExportExcel-CuP74w3M.js";import"./FileSaver.min-BjsMR5-F.js";import{d as X}from"./Explicit-zjpw1CVC.js";import{S as N}from"./Switch-DQFqkRTg.js";import{E as z}from"./Edit-CuBO9VBA.js";import{T as G}from"./Tooltip-CTC8kJf2.js";import{C as O}from"./Container-DdJtpPYi.js";import{A as U}from"./AddCircle-BEynYoHR.js";import"./Chip-BAZYjULl.js";import"./TextField-D13pBZMm.js";import"./useThemeProps-Cz-DRPQp.js";import"./FormControlLabel-CKWm9ZMF.js";import"./SwitchBase-CxMVVAa1.js";import"./InputAdornment-DzH7OAyS.js";import"./KeyboardArrowRight-CeattqcP.js";var h={},F=R;Object.defineProperty(h,"__esModule",{value:!0});var j=h.default=void 0,J=F(T()),Q=t;j=h.default=(0,J.default)((0,Q.jsx)("path",{d:"M14.83 4.83 12.7 2.7c-.62-.62-1.7-.18-1.7.71v.66C7.06 4.56 4 7.92 4 12c0 3.64 2.43 6.71 5.77 7.68.62.18 1.23-.32 1.23-.96v-.03c0-.43-.27-.82-.68-.94C7.82 17.03 6 14.73 6 12c0-2.97 2.16-5.43 5-5.91v1.53c0 .89 1.07 1.33 1.7.71l2.13-2.08c.4-.38.4-1.02 0-1.42m4.84 4.93c-.16-.55-.38-1.08-.66-1.59-.31-.57-1.1-.66-1.56-.2l-.01.01c-.31.31-.38.78-.17 1.16.2.37.36.76.48 1.16.12.42.51.7.94.7h.02c.65 0 1.15-.62.96-1.24M13 18.68v.02c0 .65.62 1.14 1.24.96.55-.16 1.08-.38 1.59-.66.57-.31.66-1.1.2-1.56l-.02-.02c-.31-.31-.78-.38-1.16-.17-.37.21-.76.37-1.16.49-.41.12-.69.51-.69.94m4.44-2.65c.46.46 1.25.37 1.56-.2.28-.51.5-1.04.67-1.59.18-.62-.31-1.24-.96-1.24h-.02c-.44 0-.82.28-.94.7-.12.4-.28.79-.48 1.17-.21.38-.13.86.17 1.16"}),"RotateRightRounded");const Y=new V({position:{x:"right",y:"top"},dismissible:!0});function fe(){const m=H(),c=M(),n=y(e=>e.userCurrent),[o,u]=d.useState(!1),I=d.useMemo(()=>[{field:"userId",headerName:"Mã nhân viên",width:150,renderCell:e=>{var r,a;return t.jsx("span",{className:((r=e.row)==null?void 0:r.userId)===((a=n==null?void 0:n.data)==null?void 0:a.userId)?"text-orange-400 font-bold":"",children:e.value})}},{field:"fullName",headerName:"Họ và tên",width:210,renderCell:e=>{var r,a;return t.jsx("span",{className:((r=e.row)==null?void 0:r.userId)===((a=n==null?void 0:n.data)==null?void 0:a.userId)?"text-orange-400 font-bold":"",children:e.value})}},{field:"phoneNumber",headerName:"Số điện thoại",width:170},{field:"role",headerName:"Chức vụ",width:150,valueGetter:e=>e.roleDescription?e.roleDescription:"?"},{field:"startDate",headerName:"Ngày vào làm",width:180},{field:"isActive",headerName:"Trạng thái",width:120,renderCell:e=>{var r,a,l;return t.jsx(N,{disabled:((r=e.row)==null?void 0:r.userId)===((a=n==null?void 0:n.data)==null?void 0:a.userId)||!1||o,checked:(l=e.row)==null?void 0:l.isActive,onChange:()=>{var i;return A((i=e.row)==null?void 0:i.userId)},color:"secondary"})}},{field:"actions",headerAlign:"center",headerName:"Công cụ",width:130,renderCell:e=>t.jsxs(s,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:[t.jsx(v,{color:"primary",onClick:()=>C(e.row),style:{textAlign:"center"},children:t.jsx(z,{})}),o&&t.jsx(G,{title:"Khôi phục tài khoản này",placement:"bottom",children:t.jsx(v,{color:"primary",onClick:()=>E(e.row),style:{textAlign:"center"},children:t.jsx(j,{})})})]})}],[o]),C=e=>{m(`/employee/EmployeeDetail/${e.userId}`)},D=()=>{m("/employee/EmployeeDetail/create")},A=e=>{c(P(e))},E=e=>{e.userId&&(c(_(e.userId)),Y.success("Khôi phục tài khoản thành công!"))},p=y(e=>{var r;return((r=e.employeeNew)==null?void 0:r.data.data)||[]}),b=e=>{u(e.target.checked);const r=new URLSearchParams(f);r.set("showDeleted",e.target.checked),k(r)},S=async()=>{const e=[{header:"STT",key:"STT",width:10},{header:"Mã nhân viên",key:"userId",width:15},{header:"Họ và tên",key:"fullName",width:25},{header:"Số điện thoại",key:"phoneNumber",width:20},{header:"Chức vụ",key:"roleDescription",width:15},{header:"Ngày vào làm",key:"startDate",width:18},{header:"Trạng thái",key:"isActive",width:20},,];if(!p)return;const r=p.map((a,l)=>{var x;const i=((x=a.role)==null?void 0:x.roleDescription)||"Không xác định";return{userId:a.userId,fullName:a.fullName,phoneNumber:a.phoneNumber,roleDescription:i,startDate:a.startDate,isActive:a.isActive?"Hoạt động":"Không hoạt động"}});W(e,r,"DanhSachNhanVien")},[f,k]=B();return d.useEffect(()=>{const e=f.get("showDeleted")==="true";u(e)},[o,c]),t.jsxs(O,{maxWidth:"xl",sx:{paddingTop:3},children:[t.jsxs(s,{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:3,children:[t.jsx(g,{variant:"h4",component:"h2",fontWeight:"bold",color:o?"#ab003c":"inherit",children:o?"DANH SÁCH NHÂN VIÊN ĐÃ XÓA":"DANH SÁCH NHÂN VIÊN"}),t.jsx(w,{variant:"contained",color:"success",startIcon:t.jsx(U,{}),onClick:D,children:"Thêm mới"})]}),t.jsx(s,{sx:{height:500,overflow:"auto"},children:t.jsx($,{columns:I,stt:!0,id:"userId",dispatchHandle:o?K:q,sliceName:"employeeNew"})}),t.jsxs(s,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2,children:[t.jsxs(s,{display:"flex",alignItems:"center",children:[t.jsx(g,{variant:"body1",marginRight:1,color:"red",children:"Nhân viên đã xóa:"}),t.jsx(N,{checked:o,onChange:b,color:"secondary"})]}),t.jsx(w,{variant:"contained",startIcon:t.jsx(X,{}),onClick:S,sx:{fontSize:10},children:"Xuất Excel"})]})]})}export{fe as default};
