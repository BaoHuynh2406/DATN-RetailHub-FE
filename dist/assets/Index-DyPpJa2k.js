import{j as e,M as b,B as d,b as p,r as c,T as B}from"./index-DP8KUik0.js";import{d as T}from"./Delete-D2U_MqpA.js";import{d as k}from"./Search-DKTO6SBX.js";import{D as A,a as q,b as w}from"./DialogContent-BphjaW86.js";import{D as W}from"./DialogTitle-B7PNP3Zg.js";import{T as C}from"./TextField-wt1h2hNg.js";import{I as M}from"./InputAdornment-BB7_Xr8N.js";import{E}from"./Edit-Dd-fut1e.js";import{C as P}from"./Container-CJKjEmvN.js";import{A as z}from"./AddCircle-BCosJuU0.js";import"./useThemeProps-RlFDv_1a.js";function L({open:f,handleClose:o,handleSearchClick:m,searchQuery:a,setSearchQuery:i,productImportDetails:x,setProductImportDetails:g,selectedProduct:n,handleSaveImport:u}){return e.jsxs(A,{open:f,onClose:o,maxWidth:"md",fullWidth:!0,children:[e.jsx(W,{sx:{textAlign:"center",fontWeight:"bold"},children:"Nhập Sản phẩm"}),e.jsx(q,{children:n?e.jsx(d,{sx:{marginTop:"30px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2},children:[{label:"Mã Sản phẩm",name:"productId",value:n.ID},{label:"Tên Sản phẩm",name:"productName",value:n.productName},{label:"Barcode",name:"barcode",value:n.Barcode},{label:"Giá nhập",name:"price"},{label:"Số lượng",name:"quantity"},{label:"Ghi chú",name:"note"}].map(({label:h,name:l,value:j})=>e.jsx(C,{label:h,fullWidth:!0,variant:"outlined",name:l,value:j||x[l],onChange:y=>g({...x,[l]:y.target.value})},l))}):e.jsx(e.Fragment,{children:e.jsx(C,{label:"Tìm kiếm sản phẩm (ID hoặc Barcode)",fullWidth:!0,variant:"outlined",value:a,onChange:h=>i(h.target.value),sx:{marginBottom:"20px"},InputProps:{endAdornment:e.jsx(M,{position:"end",children:e.jsx(b,{onClick:m,children:e.jsx(k,{})})})}})})}),e.jsxs(w,{sx:{justifyContent:"center"},children:[n?e.jsx(p,{onClick:u,sx:{fontSize:"20px",color:"green",padding:"10px 20px"},children:"Lưu"}):e.jsx(p,{onClick:m,sx:{fontSize:"20px",color:"blue",padding:"10px 20px"},children:"Tìm kiếm"}),e.jsx(p,{onClick:o,sx:{fontSize:"20px",color:"red",padding:"10px 20px"},children:"Hủy"})]})]})}function V(){const[f,o]=c.useState(!1),[m,a]=c.useState({productId:"",productName:"",barcode:"",price:"",quantity:"",note:""}),[i,x]=c.useState(""),[g,n]=c.useState(null),[u,h]=c.useState([{id:1,ID:"SP001",productName:"Sản phẩm 1",quantity:10,totalAmount:"150,000",Barcode:"73254822"},{id:2,ID:"SP002",productName:"Sản phẩm 2",quantity:5,totalAmount:"125,000",Barcode:"894274247"}]),l=()=>{a({productId:"",productName:"",barcode:"",price:"",quantity:"",note:""}),o(!0)},j=()=>{o(!1),a({productId:"",productName:"",barcode:"",price:"",quantity:"",note:""}),n(null)},y=t=>/\d{3}$/.test(t),D=()=>{if(!y(i)){alert("Mã barcode phải có đúng 3 chữ số ở cuối");return}const t=u.find(r=>r.ID.includes(i)||r.Barcode.includes(i)||r.productName.includes(i));t?n(t):alert("Không tìm thấy sản phẩm")},N=()=>{console.log("Import product details saved:",m),a({productId:"",productName:"",barcode:"",price:"",quantity:"",note:""}),n(null),o(!1)},S=t=>{a({productId:t.ID,productName:t.productName,barcode:t.Barcode,price:"",quantity:"",note:""}),o(!0)},v=t=>{const r=u.filter(s=>s.ID!==t);h(r)},I=c.useMemo(()=>[{field:"ID",headerName:"Mã",width:150},{field:"productName",headerName:"Tên sản phẩm",width:200},{field:"quantity",headerName:"Số lượng",width:150},{field:"totalAmount",headerName:"Thành tiền",width:120},{field:"actions",headerName:"Công cụ",width:150,align:"center",renderCell:t=>e.jsxs(d,{display:"flex",justifyContent:"left",alignItems:"center",children:[e.jsx(b,{color:"error",onClick:()=>v(t.row.ID),children:e.jsx(T,{})}),e.jsx(b,{color:"primary",onClick:()=>S(t.row),children:e.jsx(E,{})})]})}],[]);return e.jsxs(P,{maxWidth:"xl",sx:{paddingTop:3},children:[e.jsx(d,{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:3,children:e.jsx(B,{variant:"h4",component:"h2",fontWeight:"bold",children:"Tạo mới phiếu nhập hàng"})}),e.jsx(d,{sx:{height:300,overflow:"auto",border:"1px solid #ddd",borderRadius:2,padding:2},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:I.map(t=>e.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:"8px",background:"#f7f7f7"},children:t.headerName},t.field))})}),e.jsx("tbody",{children:u.map((t,r)=>e.jsx("tr",{style:{borderBottom:"1px solid #eee"},children:I.map(s=>e.jsx("td",{style:{padding:"8px"},children:s.renderCell?s.renderCell(t):t[s.field]||""},s.field))},r))})]})}),e.jsxs(d,{display:"flex",justifyContent:"space-between",flexDirection:"column",marginTop:2,children:[e.jsx(d,{display:"flex",sx:{margin:"5px 10px"},children:e.jsx(p,{variant:"contained",color:"success",startIcon:e.jsx(z,{}),onClick:l,children:"Nhấn để thêm sản phẩm"})}),e.jsxs(d,{display:"flex",sx:{margin:"20px 30px"},children:[e.jsx(p,{variant:"contained",color:"primary",sx:{marginRight:2},children:"Lưu"}),e.jsx(p,{variant:"outlined",children:"Đặt Lại"})]})]}),e.jsx(L,{open:f,handleClose:j,handleSearchClick:D,searchQuery:i,setSearchQuery:x,productImportDetails:m,setProductImportDetails:a,selectedProduct:g,handleSaveImport:N})]})}export{V as default};
