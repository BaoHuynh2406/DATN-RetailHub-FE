import{b as N,a as d,ay as C,j as e,T as v,B as m,r as _,i as B,a8 as g,M as k,g as A,D as P,c as R}from"./index-fCbYz-6P.js";import{T as E}from"./TablePagination-hGNVGNlY.js";import{d as y}from"./dayjs.min-DqRNt2r9.js";import{S as L,T as D}from"./TextField-D13pBZMm.js";import{L as F,A as $,D as O}from"./AdapterDayjs-D23jopJk.js";import{d as q}from"./Explicit-zjpw1CVC.js";import{E as z}from"./useExportExcel-CuP74w3M.js";import{C as H}from"./Container-DdJtpPYi.js";import"./Chip-BAZYjULl.js";import"./Tooltip-CTC8kJf2.js";import"./useThemeProps-Cz-DRPQp.js";import"./FormControlLabel-CKWm9ZMF.js";import"./SwitchBase-CxMVVAa1.js";import"./InputAdornment-DzH7OAyS.js";import"./KeyboardArrowRight-CeattqcP.js";import"./DialogContent-BomaAlaV.js";import"./ListItem-CFjFLUga.js";function W({startDate:n,endDate:h}){const x=N();d.useState(!1),d.useState(null);const l=[{field:"productId",headerName:"Mã sản phẩm",width:200},{field:"image",headerName:"Ảnh",headerAlign:"center",width:250,renderCell:a=>e.jsx(m,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx("img",{src:a.row.image,alt:"Product",style:{width:"100px",height:"50px",objectFit:"cover"}})})},{field:"productName",headerName:"Tên sản phẩm",width:300},{field:"unit",headerName:"Đơn vị tính",width:150},{field:"quantitySold",headerName:"Số lượng bán",width:150}];d.useEffect(()=>{x(C({page:1,pageSize:10,startDate:u(n),endDate:u(h)}))},[n,h]);const u=a=>y(a).format("YYYY-MM-DD");return e.jsxs(e.Fragment,{children:[e.jsx(v,{marginTop:4,marginBottom:2,variant:"h6",children:"Danh sách sản phẩm xuất kho"}),e.jsx(E,{columns:l,stt:!0,id:"productId",dispatchHandle:C,sliceName:"outProduct",additionalParams:{startDate:u(n),endDate:u(h)}})]})}var M={},G=B;Object.defineProperty(M,"__esModule",{value:!0});var w=M.default=void 0,X=G(_()),V=e;w=M.default=(0,X.default)((0,V.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");var T={},K=B;Object.defineProperty(T,"__esModule",{value:!0});var S=T.default=void 0,U=K(_()),J=e;S=T.default=(0,U.default)((0,J.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");function Q({startDate:n,endDate:h,setStartDate:x,setEndDate:l,handleChange:u,invoiceDays:a,sort:Y,setSort:I}){const[o,j]=d.useState({start:null,end:null});d.useEffect(()=>{o.start&&o.end&&(x(o.start),l(o.end))},[o,x,l]);const f=(t,s)=>{const i=s==="next"?1:-1;let r=n;a===7?r=n.add(i*7,"day"):a===30?r=n.add(i,"month"):r=n.add(i,"day"),x(r),a===1?l(r):a===7?l(r.endOf("week")):a===30&&l(r.endOf("month"))},p=(()=>{switch(a){case 1:return{prev:e.jsx(w,{}),next:e.jsx(S,{})};case 7:return{prev:e.jsx(w,{}),next:e.jsx(S,{})};case 30:return{prev:e.jsx(w,{}),next:e.jsx(S,{})};default:return null}})(),c=(t,s)=>{j(i=>({...i,[t]:s}))};return e.jsx(e.Fragment,{children:e.jsxs(m,{sx:{backgroundColor:"#f2f2f2",padding:2,borderRadius:1,boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},flex:5,children:[e.jsx(v,{variant:"h6",component:"h3",fontWeight:"bold",color:"inherit",marginRight:1,children:"BÁO CÁO XUẤT HÀNG THEO:"}),e.jsx(m,{display:"flex",alignItems:"center",children:e.jsxs(L,{id:"filter-invoice-select",value:a,onChange:u,children:[e.jsx(g,{value:1,children:"Hôm nay"}),e.jsx(g,{value:7,children:"Tuần này"}),e.jsx(g,{value:30,children:"Tháng này"}),e.jsx(g,{value:"custom",children:"Tùy chỉnh"})]})}),a==="custom"?e.jsx(m,{display:"flex",alignItems:"center",gap:2,sx:{flexGrow:1,justifyContent:"center"},children:e.jsxs(F,{dateAdapter:$,children:[e.jsx(O,{label:"Ngày bắt đầu",value:o.start,onChange:t=>c("start",t),renderInput:t=>e.jsx(D,{...t}),format:"DD/MM/YYYY"}),e.jsx(v,{children:" đến "}),e.jsx(O,{label:"Ngày kết thúc",value:o.end,onChange:t=>c("end",t),renderInput:t=>e.jsx(D,{...t}),format:"DD/MM/YYYY"})]})}):p&&e.jsxs(m,{display:"flex",alignItems:"center",gap:2,sx:{flexGrow:1,justifyContent:"center"},children:[e.jsx(k,{variant:"outlined",onClick:()=>f("day","prev"),children:p.prev}),e.jsx(v,{children:a===1?n.format("DD/MM/YYYY"):`Từ ${n.format("DD/MM/YYYY")} đến ${h.format("DD/MM/YYYY")}`}),e.jsx(k,{variant:"outlined",onClick:()=>f("day","next"),children:p.next})]})]})})}function pe(){const[n,h]=d.useState(1),[x,l]=d.useState("total"),[u,a]=d.useState("des"),[Y,I]=d.useState(y()),[o,j]=d.useState(y()),f=A(c=>{var t,s;return((s=(t=c.outProduct)==null?void 0:t.data)==null?void 0:s.data)||[]}),b=c=>{h(c.target.value);const t=c.target.value;let s,i;const r=y();t===1?(s=r.startOf("day"),i=r.endOf("day")):t===7?(s=r.startOf("week"),i=r.endOf("week")):t===30&&(s=r.startOf("month"),i=r.endOf("month")),I(s),j(i)},p=async()=>{const c=[{header:"STT",key:"STT",width:10},{header:"Mã sản phẩm",key:"productId",width:15},{header:"Tên sản phẩm",key:"productName",width:25},{header:"Ảnh",key:"image",width:20},{header:"Đơn vị tính",key:"unit",width:15},{header:"Số lượng",key:"quantitySold",width:15}];f&&z(c,f,"DanhSachSanPhamXuatKho")};return e.jsxs(H,{maxWidth:"xl",sx:{paddingTop:2},children:[e.jsx(m,{display:"flex",flexWrap:"wrap",alignItems:"center",marginBottom:1,children:e.jsx(Q,{startDate:Y,setStartDate:I,endDate:o,setEndDate:j,handleChange:b,viewMode:x,setViewMode:l,invoiceDays:n,sort:u,setSort:a})}),e.jsx(P,{}),e.jsx(W,{startDate:Y,endDate:o}),e.jsx(R,{sx:{marginY:"20px",fontSize:10},variant:"contained",startIcon:e.jsx(q,{}),onClick:p,children:"Xuất Excel"})]})}export{pe as default};
