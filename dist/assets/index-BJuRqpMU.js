import{o as ve,q as ye,s as Y,t as Xe,v as _e,_ as v,r as d,w as Se,x as de,k as H,j as r,y as Ce,z as pt,A as Ue,E as Ve,F as Ye,G as ae,H as ft,I as xe,J as bt,B as se,T as ee,L as Ke,K as De,M as ie,b as ce,a as xt,f as me,N as Ae,O as Le,P as mt,Q as gt,S as vt,U as yt,V as St,W as Ct,X as Tt,Y as It}from"./index-DP8KUik0.js";import{d as qe}from"./Edit-CUJYzgyA.js";import{d as Ge}from"./Delete-D2U_MqpA.js";import{L as Je}from"./ListItem-DItOy7QW.js";import{D as wt,a as Bt,b as Et}from"./DialogContent-BphjaW86.js";import{D as jt}from"./DialogTitle-B7PNP3Zg.js";import{T as Z}from"./TextField-wt1h2hNg.js";import{C as Mt}from"./Container-CJKjEmvN.js";import{K as Rt,a as Nt}from"./KeyboardArrowRight-DXd9sxFF.js";import"./useThemeProps-RlFDv_1a.js";let D;function Qe(){if(D)return D;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),D="reverse",e.scrollLeft>0?D="default":(e.scrollLeft=1,e.scrollLeft===0&&(D="negative")),document.body.removeChild(e),D}function Wt(e,t){const o=e.scrollLeft;if(t!=="rtl")return o;switch(Qe()){case"negative":return e.scrollWidth-e.clientWidth+o;case"reverse":return e.scrollWidth-e.clientWidth-o;default:return o}}function Pt(e){return ye("MuiTab",e)}const O=ve("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),kt=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],At=e=>{const{classes:t,textColor:o,fullWidth:l,wrapped:a,icon:i,label:g,selected:x,disabled:c}=e,m={root:["root",i&&g&&"labelIcon",`textColor${_e(o)}`,l&&"fullWidth",a&&"wrapped",x&&"selected",c&&"disabled"],iconWrapper:["iconWrapper"]};return Ce(m,Pt,t)},Lt=Y(Xe,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.label&&o.icon&&t.labelIcon,t[`textColor${_e(o.textColor)}`],o.fullWidth&&t.fullWidth,o.wrapped&&t.wrapped,{[`& .${O.iconWrapper}`]:t.iconWrapper}]}})(({theme:e,ownerState:t})=>v({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${O.iconWrapper}`]:v({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${O.selected}`]:{opacity:1},[`&.${O.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${O.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${O.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${O.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${O.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),ze=d.forwardRef(function(t,o){const l=Se({props:t,name:"MuiTab"}),{className:a,disabled:i=!1,disableFocusRipple:g=!1,fullWidth:x,icon:c,iconPosition:m="top",indicator:S,label:I,onChange:T,onClick:f,onFocus:h,selected:E,selectionFollowsFocus:b,textColor:j="inherit",value:w,wrapped:A=!1}=l,L=de(l,kt),X=v({},l,{disabled:i,disableFocusRipple:g,selected:E,icon:!!c,iconPosition:m,label:!!I,fullWidth:x,textColor:j,wrapped:A}),W=At(X),C=c&&I&&d.isValidElement(c)?d.cloneElement(c,{className:H(W.iconWrapper,c.props.className)}):c,z=P=>{!E&&T&&T(P,w),f&&f(P)},K=P=>{b&&!E&&T&&T(P,w),h&&h(P)};return r.jsxs(Lt,v({focusRipple:!g,className:H(W.root,a),ref:o,role:"tab","aria-selected":E,disabled:i,onClick:z,onFocus:K,ownerState:X,tabIndex:E?0:-1},L,{children:[m==="top"||m==="start"?r.jsxs(d.Fragment,{children:[C,I]}):r.jsxs(d.Fragment,{children:[I,C]}),S]}))});function zt(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Ft(e,t,o,l={},a=()=>{}){const{ease:i=zt,duration:g=300}=l;let x=null;const c=t[e];let m=!1;const S=()=>{m=!0},I=T=>{if(m){a(new Error("Animation cancelled"));return}x===null&&(x=T);const f=Math.min(1,(T-x)/g);if(t[e]=i(f)*(o-c)+c,f>=1){requestAnimationFrame(()=>{a(null)});return}requestAnimationFrame(I)};return c===o?(a(new Error("Element already at target position")),S):(requestAnimationFrame(I),S)}const $t=["onChange"],Ot={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Ht(e){const{onChange:t}=e,o=de(e,$t),l=d.useRef(),a=d.useRef(null),i=()=>{l.current=a.current.offsetHeight-a.current.clientHeight};return pt(()=>{const g=Ue(()=>{const c=l.current;i(),c!==l.current&&t(l.current)}),x=Ve(a.current);return x.addEventListener("resize",g),()=>{g.clear(),x.removeEventListener("resize",g)}},[t]),d.useEffect(()=>{i(),t(l.current)},[t]),r.jsx("div",v({style:Ot,ref:a},o))}function Xt(e){return ye("MuiTabScrollButton",e)}const _t=ve("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Ut=["className","slots","slotProps","direction","orientation","disabled"],Vt=e=>{const{classes:t,orientation:o,disabled:l}=e;return Ce({root:["root",o,l&&"disabled"]},Xt,t)},Yt=Y(Xe,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.orientation&&t[o.orientation]]}})(({ownerState:e})=>v({width:40,flexShrink:0,opacity:.8,[`&.${_t.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),Kt=d.forwardRef(function(t,o){var l,a;const i=Se({props:t,name:"MuiTabScrollButton"}),{className:g,slots:x={},slotProps:c={},direction:m}=i,S=de(i,Ut),I=Ye(),T=v({isRtl:I},i),f=Vt(T),h=(l=x.StartScrollButtonIcon)!=null?l:Rt,E=(a=x.EndScrollButtonIcon)!=null?a:Nt,b=ae({elementType:h,externalSlotProps:c.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:T}),j=ae({elementType:E,externalSlotProps:c.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:T});return r.jsx(Yt,v({component:"div",className:H(f.root,g),ref:o,role:null,ownerState:T,tabIndex:null},S,{children:m==="left"?r.jsx(h,v({},b)):r.jsx(E,v({},j))}))});function Dt(e){return ye("MuiTabs",e)}const ge=ve("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),qt=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Fe=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,$e=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,le=(e,t,o)=>{let l=!1,a=o(e,t);for(;a;){if(a===e.firstChild){if(l)return;l=!0}const i=a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||i)a=o(e,a);else{a.focus();return}}},Gt=e=>{const{vertical:t,fixed:o,hideScrollbar:l,scrollableX:a,scrollableY:i,centered:g,scrollButtonsHideMobile:x,classes:c}=e;return Ce({root:["root",t&&"vertical"],scroller:["scroller",o&&"fixed",l&&"hideScrollbar",a&&"scrollableX",i&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",g&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",x&&"scrollButtonsHideMobile"],scrollableX:[a&&"scrollableX"],hideScrollbar:[l&&"hideScrollbar"]},Dt,c)},Jt=Y("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${ge.scrollButtons}`]:t.scrollButtons},{[`& .${ge.scrollButtons}`]:o.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,o.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>v({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${ge.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),Qt=Y("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.scroller,o.fixed&&t.fixed,o.hideScrollbar&&t.hideScrollbar,o.scrollableX&&t.scrollableX,o.scrollableY&&t.scrollableY]}})(({ownerState:e})=>v({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Zt=Y("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.flexContainer,o.vertical&&t.flexContainerVertical,o.centered&&t.centered]}})(({ownerState:e})=>v({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),eo=Y("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>v({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),to=Y(Ht)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Oe={},oo=d.forwardRef(function(t,o){const l=Se({props:t,name:"MuiTabs"}),a=ft(),i=Ye(),{"aria-label":g,"aria-labelledby":x,action:c,centered:m=!1,children:S,className:I,component:T="div",allowScrollButtonsMobile:f=!1,indicatorColor:h="primary",onChange:E,orientation:b="horizontal",ScrollButtonComponent:j=Kt,scrollButtons:w="auto",selectionFollowsFocus:A,slots:L={},slotProps:X={},TabIndicatorProps:W={},TabScrollButtonProps:C={},textColor:z="primary",value:K,variant:P="standard",visibleScrollbar:ue=!1}=l,Ze=de(l,qt),R=P==="scrollable",M=b==="vertical",q=M?"scrollTop":"scrollLeft",te=M?"top":"left",oe=M?"bottom":"right",he=M?"clientHeight":"clientWidth",G=M?"height":"width",_=v({},l,{component:T,allowScrollButtonsMobile:f,indicatorColor:h,orientation:b,vertical:M,scrollButtons:w,textColor:z,variant:P,visibleScrollbar:ue,fixed:!R,hideScrollbar:R&&!ue,scrollableX:R&&!M,scrollableY:R&&M,centered:m&&!R,scrollButtonsHideMobile:!f}),F=Gt(_),et=ae({elementType:L.StartScrollButtonIcon,externalSlotProps:X.startScrollButtonIcon,ownerState:_}),tt=ae({elementType:L.EndScrollButtonIcon,externalSlotProps:X.endScrollButtonIcon,ownerState:_}),[Te,ot]=d.useState(!1),[U,Ie]=d.useState(Oe),[we,rt]=d.useState(!1),[Be,nt]=d.useState(!1),[Ee,lt]=d.useState(!1),[je,st]=d.useState({overflow:"hidden",scrollbarWidth:0}),Me=new Map,k=d.useRef(null),V=d.useRef(null),Re=()=>{const n=k.current;let s;if(n){const u=n.getBoundingClientRect();s={clientWidth:n.clientWidth,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop,scrollLeftNormalized:Wt(n,i?"rtl":"ltr"),scrollWidth:n.scrollWidth,top:u.top,bottom:u.bottom,left:u.left,right:u.right}}let p;if(n&&K!==!1){const u=V.current.children;if(u.length>0){const y=u[Me.get(K)];p=y?y.getBoundingClientRect():null}}return{tabsMeta:s,tabMeta:p}},J=xe(()=>{const{tabsMeta:n,tabMeta:s}=Re();let p=0,u;if(M)u="top",s&&n&&(p=s.top-n.top+n.scrollTop);else if(u=i?"right":"left",s&&n){const B=i?n.scrollLeftNormalized+n.clientWidth-n.scrollWidth:n.scrollLeft;p=(i?-1:1)*(s[u]-n[u]+B)}const y={[u]:p,[G]:s?s[G]:0};if(isNaN(U[u])||isNaN(U[G]))Ie(y);else{const B=Math.abs(U[u]-y[u]),N=Math.abs(U[G]-y[G]);(B>=1||N>=1)&&Ie(y)}}),pe=(n,{animation:s=!0}={})=>{s?Ft(q,k.current,n,{duration:a.transitions.duration.standard}):k.current[q]=n},Ne=n=>{let s=k.current[q];M?s+=n:(s+=n*(i?-1:1),s*=i&&Qe()==="reverse"?-1:1),pe(s)},We=()=>{const n=k.current[he];let s=0;const p=Array.from(V.current.children);for(let u=0;u<p.length;u+=1){const y=p[u];if(s+y[he]>n){u===0&&(s=n);break}s+=y[he]}return s},at=()=>{Ne(-1*We())},it=()=>{Ne(We())},ct=d.useCallback(n=>{st({overflow:null,scrollbarWidth:n})},[]),dt=()=>{const n={};n.scrollbarSizeListener=R?r.jsx(to,{onChange:ct,className:H(F.scrollableX,F.hideScrollbar)}):null;const p=R&&(w==="auto"&&(we||Be)||w===!0);return n.scrollButtonStart=p?r.jsx(j,v({slots:{StartScrollButtonIcon:L.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:et},orientation:b,direction:i?"right":"left",onClick:at,disabled:!we},C,{className:H(F.scrollButtons,C.className)})):null,n.scrollButtonEnd=p?r.jsx(j,v({slots:{EndScrollButtonIcon:L.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:tt},orientation:b,direction:i?"left":"right",onClick:it,disabled:!Be},C,{className:H(F.scrollButtons,C.className)})):null,n},Pe=xe(n=>{const{tabsMeta:s,tabMeta:p}=Re();if(!(!p||!s)){if(p[te]<s[te]){const u=s[q]+(p[te]-s[te]);pe(u,{animation:n})}else if(p[oe]>s[oe]){const u=s[q]+(p[oe]-s[oe]);pe(u,{animation:n})}}}),re=xe(()=>{R&&w!==!1&&lt(!Ee)});d.useEffect(()=>{const n=Ue(()=>{k.current&&J()});let s;const p=B=>{B.forEach(N=>{N.removedNodes.forEach(Q=>{var $;($=s)==null||$.unobserve(Q)}),N.addedNodes.forEach(Q=>{var $;($=s)==null||$.observe(Q)})}),n(),re()},u=Ve(k.current);u.addEventListener("resize",n);let y;return typeof ResizeObserver<"u"&&(s=new ResizeObserver(n),Array.from(V.current.children).forEach(B=>{s.observe(B)})),typeof MutationObserver<"u"&&(y=new MutationObserver(p),y.observe(V.current,{childList:!0})),()=>{var B,N;n.clear(),u.removeEventListener("resize",n),(B=y)==null||B.disconnect(),(N=s)==null||N.disconnect()}},[J,re]),d.useEffect(()=>{const n=Array.from(V.current.children),s=n.length;if(typeof IntersectionObserver<"u"&&s>0&&R&&w!==!1){const p=n[0],u=n[s-1],y={root:k.current,threshold:.99},B=be=>{rt(!be[0].isIntersecting)},N=new IntersectionObserver(B,y);N.observe(p);const Q=be=>{nt(!be[0].isIntersecting)},$=new IntersectionObserver(Q,y);return $.observe(u),()=>{N.disconnect(),$.disconnect()}}},[R,w,Ee,S==null?void 0:S.length]),d.useEffect(()=>{ot(!0)},[]),d.useEffect(()=>{J()}),d.useEffect(()=>{Pe(Oe!==U)},[Pe,U]),d.useImperativeHandle(c,()=>({updateIndicator:J,updateScrollButtons:re}),[J,re]);const ke=r.jsx(eo,v({},W,{className:H(F.indicator,W.className),ownerState:_,style:v({},U,W.style)}));let ne=0;const ut=d.Children.map(S,n=>{if(!d.isValidElement(n))return null;const s=n.props.value===void 0?ne:n.props.value;Me.set(s,ne);const p=s===K;return ne+=1,d.cloneElement(n,v({fullWidth:P==="fullWidth",indicator:p&&!Te&&ke,selected:p,selectionFollowsFocus:A,onChange:E,textColor:z,value:s},ne===1&&K===!1&&!n.props.tabIndex?{tabIndex:0}:{}))}),ht=n=>{const s=V.current,p=bt(s).activeElement;if(p.getAttribute("role")!=="tab")return;let y=b==="horizontal"?"ArrowLeft":"ArrowUp",B=b==="horizontal"?"ArrowRight":"ArrowDown";switch(b==="horizontal"&&i&&(y="ArrowRight",B="ArrowLeft"),n.key){case y:n.preventDefault(),le(s,p,$e);break;case B:n.preventDefault(),le(s,p,Fe);break;case"Home":n.preventDefault(),le(s,null,Fe);break;case"End":n.preventDefault(),le(s,null,$e);break}},fe=dt();return r.jsxs(Jt,v({className:H(F.root,I),ownerState:_,ref:o,as:T},Ze,{children:[fe.scrollButtonStart,fe.scrollbarSizeListener,r.jsxs(Qt,{className:F.scroller,ownerState:_,style:{overflow:je.overflow,[M?`margin${i?"Left":"Right"}`:"marginBottom"]:ue?void 0:-je.scrollbarWidth},ref:k,children:[r.jsx(Zt,{"aria-label":g,"aria-labelledby":x,"aria-orientation":b==="vertical"?"vertical":null,className:F.flexContainer,ownerState:_,onKeyDown:ht,ref:V,role:"tablist",children:ut}),Te&&ke]}),fe.scrollButtonEnd]}))}),He=({children:e,value:t,index:o,...l})=>r.jsx("div",{role:"tabpanel",hidden:t!==o,id:`simple-tabpanel-${o}`,"aria-labelledby":`simple-tab-${o}`,...l,children:t===o&&r.jsx(se,{sx:{p:3},children:e})}),ro=({categories:e,handleOpenModal:t,handleDelete:o})=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{variant:"h6",children:"Danh sách loại hàng"}),r.jsx(Ke,{children:e.map((l,a)=>r.jsxs(Je,{children:[r.jsx(De,{primary:l.categoryName}),r.jsx(ie,{onClick:()=>t("category",l,a),children:r.jsx(qe,{})}),r.jsx(ie,{onClick:()=>o("category",l.categoryId),children:r.jsx(Ge,{})})]},l.categoryId))}),r.jsx(ce,{variant:"contained",color:"primary",onClick:()=>t("category"),children:"Thêm loại hàng"})]}),no=({taxes:e,handleOpenModal:t,handleDelete:o})=>r.jsxs(r.Fragment,{children:[r.jsx(ee,{variant:"h6",children:"Danh sách thuế"}),r.jsx(Ke,{children:e.map(l=>r.jsxs(Je,{children:[r.jsx(De,{primary:`${l.taxId} - ${l.taxName} - ${l.taxRate}%`}),r.jsx(ie,{onClick:()=>t("tax",l),children:r.jsx(qe,{})}),r.jsx(ie,{onClick:()=>o("tax",l.taxId),children:r.jsx(Ge,{})})]},l.taxId))}),r.jsx(ce,{variant:"contained",color:"primary",onClick:()=>t("tax"),children:"Thêm thuế"})]}),lo=({open:e,handleClose:t,modalData:o,setModalData:l,handleAddOrUpdate:a})=>{const i=c=>m=>{l(S=>({...S,[c]:m.target.value}))},g=()=>({category:o.isEditMode?"Sửa loại hàng":"Thêm loại hàng",tax:o.isEditMode?"Sửa thuế":"Thêm thuế",paymentMethod:o.isEditMode?"Sửa phương thức thanh toán":"Thêm phương thức thanh toán"})[o.modalType]||"",x=c=>{const m=c.target.files[0];if(m){const S=new FileReader;S.onloadend=()=>{l(I=>({...I,image:S.result,imageName:m.name}))},S.readAsDataURL(m)}};return r.jsxs(wt,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[r.jsx(jt,{sx:{fontWeight:"bold",color:"#1976d2",textAlign:"center"},children:g()}),r.jsx(Bt,{children:r.jsxs(se,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[o.modalType==="category"&&r.jsx(Z,{label:"Tên loại hàng",fullWidth:!0,value:o.newItem||"",onChange:i("newItem"),error:!!o.validationError,helperText:o.validationError}),o.modalType==="tax"&&r.jsxs(r.Fragment,{children:[r.jsx(Z,{label:"Tên thuế",fullWidth:!0,value:o.newItem||"",onChange:i("newItem"),error:!!o.validationError,helperText:o.validationError}),r.jsx(Z,{label:"Mã thuế",fullWidth:!0,value:o.taxId||"",onChange:i("taxId"),error:!!o.validationError,helperText:o.validationError}),r.jsx(Z,{label:"Thuế suất (%)",type:"number",fullWidth:!0,value:o.newTaxRate||"",onChange:i("newTaxRate"),error:!!o.validationError,helperText:o.validationError})]}),o.modalType==="paymentMethod"&&r.jsxs(r.Fragment,{children:[r.jsx(Z,{label:"Tên phương thức thanh toán",fullWidth:!0,value:o.paymentName||"",onChange:i("paymentName"),error:!!o.validationError,helperText:o.validationError}),r.jsxs(se,{sx:{marginTop:2,textAlign:"center"},children:[r.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:x,id:"image-upload"}),r.jsx("label",{htmlFor:"image-upload",children:r.jsx(se,{sx:{width:200,height:200,border:"2px dashed #aaa",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundColor:o.image?"transparent":"#f5f5f5"},children:o.image?r.jsx("img",{src:o.image,alt:"Hình ảnh phương thức thanh toán",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"8px"}}):r.jsx(ee,{variant:"body2",color:"textSecondary",children:"Chọn hình ảnh"})})})]}),o.imageName&&r.jsxs(ee,{variant:"body2",color:"textSecondary",sx:{marginTop:1},children:["Tên ảnh: ",o.imageName]})]})]})}),r.jsxs(Et,{sx:{justifyContent:"center",py:2},children:[r.jsx(ce,{onClick:t,variant:"outlined",color:"secondary",sx:{mr:1},children:"Hủy"}),r.jsx(ce,{onClick:a,variant:"contained",color:"primary",children:o.isEditMode?"Cập nhật":"Thêm"})]})]})};function mo(){const e=xt(),t=me(f=>f.settings.categories),o=me(f=>f.settings.taxes);me(f=>f.settings.paymentMethods);const[l,a]=d.useState(0),[i,g]=d.useState(!1),[x,c]=d.useState({newItem:"",newTaxRate:"",taxId:"",paymentName:"",image:"",modalType:"",isEditMode:!1,editIndex:null,validationError:"",paymentMethodId:""});d.useEffect(()=>{e(Ae()),e(Le())},[e]);const m=(f,h=null,E=null)=>{const b={modalType:f,isEditMode:!!h,editIndex:E,validationError:""};h&&(b.newItem=h.categoryName||h.taxName||h.paymentName,b.taxId=h.taxId||"",b.newTaxRate=h.taxRate||"",b.paymentName=h.paymentName||"",b.image=h.image||"",b.paymentMethodId=h.paymentMethodId||""),c(j=>({...j,...b})),g(!0)},S=()=>{g(!1),c({newItem:"",newTaxRate:"",taxId:"",paymentName:"",image:"",modalType:"",isEditMode:!1,editIndex:null,validationError:"",paymentMethodId:""}),e(gt())},I=async()=>{var W;const{newItem:f,newTaxRate:h,taxId:E,paymentName:b,image:j,modalType:w,isEditMode:A,editIndex:L,paymentMethodId:X}=x;if(!f.trim()&&w!=="paymentMethod"){c(C=>({...C,validationError:w==="category"?"Tên loại hàng không được để trống.":"Tên thuế không được để trống."}));return}if(w==="category"){const C={categoryId:(W=t[L])==null?void 0:W.categoryId,categoryName:f,isDelete:!1};await e(A?vt({categoryId:C.categoryId,updatedCategory:C}):yt({categoryName:f}))}else if(w==="tax"){if(!h||isNaN(h)){c(z=>({...z,validationError:"Thuế suất phải là một số hợp lệ."}));return}const C={taxId:E,taxName:f,taxRate:parseFloat(h),isDelete:!1};await e(A?St({taxId:C.taxId,updatedTax:C}):Ct({taxId:C.taxId,taxName:f,taxRate:parseFloat(h)}))}else if(w==="paymentMethod"){if(!b.trim()||!j.trim()){c(z=>({...z,validationError:"Tên phương thức thanh toán và hình ảnh không được để trống."}));return}const C={paymentMethodId:A?X:void 0,paymentName:b,image:j};await e(A?updatePaymentAsync({paymentMethodId:C.paymentMethodId,updatedPaymentMethod:C}):addPaymentAsync({paymentName:b,image:j}))}e(Ae()),e(Le()),S()},T=(f,h)=>{e(f==="category"?Tt(h):f==="tax"?It(h):deletePaymentAsync(h))};return r.jsxs(Mt,{maxWidth:"lg",sx:{mt:4},children:[r.jsx(ee,{variant:"h4",gutterBottom:!0,children:"Cài đặt hệ thống"}),r.jsxs(mt,{elevation:3,sx:{p:1},children:[r.jsxs(oo,{value:l,onChange:(f,h)=>a(h),centered:!0,children:[r.jsx(ze,{label:"Loại hàng"}),r.jsx(ze,{label:"Thuế"})]}),r.jsx(He,{value:l,index:0,children:r.jsx(ro,{categories:t,handleOpenModal:m,handleDelete:T})}),r.jsx(He,{value:l,index:1,children:r.jsx(no,{taxes:o,handleOpenModal:m,handleDelete:T})})]}),r.jsx(lo,{open:i,handleClose:S,modalData:x,setModalData:c,handleAddOrUpdate:I})]})}export{mo as default};
